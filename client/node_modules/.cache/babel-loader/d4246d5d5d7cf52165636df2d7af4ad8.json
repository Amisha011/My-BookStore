{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Amisha\\\\Desktop\\\\project\\\\client\\\\client\\\\src\\\\components\\\\customer-profile\\\\profile.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"../loader/loader.css\";\nimport \"../customer-profile/profile.css\";\nimport 'react-toastify/dist/ReactToastify.css';\nimport { toast } from \"react-toastify\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Profile = () => {\n  _s();\n\n  const [loader, setLoader] = useState(false);\n  const [loading, setLoading] = useState(false); // Add image logic here\n\n  const user_string = localStorage.getItem(\"user\");\n  const user = JSON.parse(user_string);\n  console.log(user);\n  const [userData, setUserdata] = useState({\n    name: user.name,\n    email: user.email,\n    phoneNumber: user.phoneNumber,\n    address: user.address\n  });\n\n  const changeUserData = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setUserdata({ ...userData,\n      [name]: value\n    });\n  };\n\n  const updateUser = async () => {\n    try {\n      const response = await axios.put(\"http://localhost:8001/api/user/updateUser\", userData, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      console.log(\"response of update api\", response);\n      toast.success(\"Updated Profile\");\n    } catch (error) {\n      console.log(\"error at updating user\", error);\n      toast.error(\"Error occured in updating profile !!\");\n    }\n  };\n\n  console.log(\"user\", user); // const [imgstate, setImagestate] = useState(user.image)\n\n  const token = localStorage.getItem(\"token\");\n\n  const uploadImage = async e => {\n    setLoader(true);\n    const files = e.target.files;\n    const data = new FormData();\n    data.append('file', files[0]);\n    data.append('upload_preset', 'eyowpxag');\n    setLoading(true);\n    const res = await fetch(\"https://api.cloudinary.com/v1_1/ddcy8imkx/image/upload\", {\n      method: 'POST',\n      body: data\n    });\n    const file = await res.json();\n    console.log(\"file\", file);\n    const user_update_response = await axios.put(\"http://localhost:8001/api/user/updateUser\", {\n      image: file.secure_url\n    }, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    });\n    console.log('updated_user_json : ', user_update_response);\n    localStorage.setItem('user', JSON.stringify(user_update_response.data));\n    setLoading(false);\n    setLoader(false);\n    toast.success(\"Image uploaded successfully !!\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section1\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top-left-profile\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.image,\n          alt: \"user's image \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"details-user\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"name\",\n            value: userData.name,\n            placeholder: \"Name\",\n            property: \"readOnly\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\",\n            value: userData.email,\n            placeholder: \"Email\",\n            property: \"readOnly\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/MyOrders\",\n            children: \"My orders \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 31\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"fas fa-hand-point-right\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 69\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/myWishlist\",\n            children: \"My wishlist \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"fas fa-hand-point-right\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 72\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            borderBottom: \"2px solid black\"\n          },\n          children: [\" Logout  \", /*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"fas fa-sign-in-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 82\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"center-profile\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.image,\n          alt: \"users image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"image-upload\",\n          accept: \"image/*\",\n          id: \"input\",\n          onChange: uploadImage,\n          placeholder: \"Upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"label\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"image-upload\",\n            htmlFor: \"input\",\n            children: \"Choose your Photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), loader ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loaderHead1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loader1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 25\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detailsss\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detailss1\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"name\",\n            value: userData.name,\n            placeholder: \"Name\",\n            onChange: changeUserData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"phoneNumber\",\n            placeholder: \"Number\",\n            value: userData.phoneNumber,\n            onChange: changeUserData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detailss2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            name: \"email\",\n            value: userData.email,\n            placeholder: \"Email\",\n            onChange: changeUserData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"address\",\n            placeholder: \"address\",\n            value: userData.address,\n            onChange: changeUserData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"update-button\",\n        onClick: () => {\n          updateUser();\n        },\n        children: \"update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Profile, \"fvwUV23wb2rmurJ3kcRbTxTU2O4=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["C:/Users/Amisha/Desktop/project/client/client/src/components/customer-profile/profile.jsx"],"names":["React","useState","useEffect","axios","toast","useHistory","Link","Profile","loader","setLoader","loading","setLoading","user_string","localStorage","getItem","user","JSON","parse","console","log","userData","setUserdata","name","email","phoneNumber","address","changeUserData","e","target","value","updateUser","response","put","headers","Authorization","success","error","token","uploadImage","files","data","FormData","append","res","fetch","method","body","file","json","user_update_response","image","secure_url","setItem","stringify","borderBottom"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\r\nimport axios from \"axios\"\r\nimport \"../loader/loader.css\"\r\nimport \"../customer-profile/profile.css\"\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory,Link } from \"react-router-dom\";\r\n\r\n\r\nconst Profile = () => {\r\n    const [loader, setLoader] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    // Add image logic here\r\n    const user_string = localStorage.getItem(\"user\");\r\n    const user = JSON.parse(user_string);\r\n    console.log(user) ;\r\n    const [userData, setUserdata] = useState({\r\n        name: user.name,\r\n        email: user.email,\r\n        phoneNumber: user.phoneNumber,\r\n        address:user.address\r\n\r\n    })\r\n\r\n    const changeUserData = (e) => {\r\n        const name = e.target.name;\r\n        const value=e.target.value;\r\n        setUserdata({...userData,[name]:value})\r\n    }\r\n\r\n    const updateUser=async()=>{\r\n        try {\r\n            const response=await axios.put(\"http://localhost:8001/api/user/updateUser\",userData, { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } });\r\n            console.log(\"response of update api\",response)  \r\n           toast.success(\"Updated Profile\")\r\n        } catch (error) {\r\n           console.log(\"error at updating user\",error)\r\n           toast.error(\"Error occured in updating profile !!\") \r\n        }\r\n    }\r\n\r\n    console.log(\"user\", user)\r\n    // const [imgstate, setImagestate] = useState(user.image)\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    const uploadImage = async e => {\r\n        setLoader(true)\r\n        const files = e.target.files;\r\n        const data = new FormData()\r\n        data.append('file', files[0]);\r\n        data.append('upload_preset', 'eyowpxag')\r\n        setLoading(true);\r\n\r\n        const res = await fetch(\"https://api.cloudinary.com/v1_1/ddcy8imkx/image/upload\", {\r\n            method: 'POST',\r\n            body: data\r\n        })\r\n        const file = await res.json();\r\n        console.log(\"file\", file);\r\n        const user_update_response = await axios.put(\"http://localhost:8001/api/user/updateUser\", { image: file.secure_url }, { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } });\r\n        console.log('updated_user_json : ', user_update_response);\r\n        localStorage.setItem('user', JSON.stringify(user_update_response.data));\r\n        setLoading(false)\r\n        setLoader(false)\r\n        toast.success(\"Image uploaded successfully !!\")\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"section1\">\r\n                <div className=\"top-left-profile\">\r\n\r\n                    <img src={user.image} alt=\"user's image \"></img>\r\n\r\n                    <div className=\"details-user\">\r\n                        <input\r\n                            name=\"name\"\r\n                            value={userData.name}\r\n                            placeholder=\"Name\"\r\n                            property=\"readOnly\" />\r\n                        <input\r\n                            name=\"email\"\r\n                            value={userData.email}\r\n                            placeholder=\"Email\"\r\n                            property=\"readOnly\" />\r\n                    </div>\r\n                </div>\r\n                <div className=\"list-left\">\r\n                    <button  ><Link to=\"/MyOrders\">My orders </Link><i class=\"fas fa-hand-point-right\"></i></button>\r\n                    <button ><Link to='/myWishlist'>My wishlist </Link><i class=\"fas fa-hand-point-right\"></i></button>\r\n                    <button style={{ borderBottom: \"2px solid black\" }}> Logout  <i class=\"fas fa-sign-in-alt\"></i></button>\r\n                </div>\r\n            </div>\r\n            <div className=\"section2\">\r\n                <div className=\"center-profile\">\r\n                    <img src={user.image} alt=\"users image\"></img>\r\n                    <input\r\n                        type=\"file\"\r\n                        name=\"image-upload\"\r\n                        accept=\"image/*\"\r\n                        id=\"input\"\r\n                        onChange={uploadImage}\r\n                        placeholder=\"Upload\"\r\n                    />\r\n                    <div className=\"label\">\r\n                        <label className=\"image-upload\" htmlFor=\"input\">\r\n                            Choose your Photo\r\n\t\t\t\t\t            </label>\r\n                    </div>\r\n                    {loader ? (\r\n                        <div className=\"loaderHead1\">\r\n                            <div className=\"loader1\"></div>\r\n                        </div>\r\n                    ) : null\r\n                    }\r\n                </div>\r\n                <div className=\"detailsss\">\r\n                    <div className=\"detailss1\">\r\n                        <input\r\n                        name=\"name\" \r\n                        value={userData.name} \r\n                        placeholder=\"Name\"\r\n                        onChange={changeUserData}\r\n                        />\r\n                        <input\r\n                        type=\"number\"\r\n                        name=\"phoneNumber\"\r\n                        placeholder=\"Number\"\r\n                         value={userData.phoneNumber} \r\n                         onChange={changeUserData}\r\n                         />\r\n                    </div>\r\n                    <div className=\"detailss2\">\r\n                        <input \r\n                        type=\"email\"\r\n                        name=\"email\"\r\n                        value={userData.email}\r\n                        placeholder=\"Email\"\r\n                        onChange={changeUserData} \r\n                        />\r\n                        <input \r\n                        name=\"address\"\r\n                        placeholder=\"address\"\r\n                        value={userData.address}\r\n                        onChange={changeUserData}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <button className=\"update-button\" onClick={()=>{updateUser()}}>update</button>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n\r\n\r\n}\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}